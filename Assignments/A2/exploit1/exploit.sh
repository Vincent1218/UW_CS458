#!/bin/bash

if [ $# -ne 1 ]
then
echo "Usage: $0 <url>"
exit 1
fi

dir=$(dirname "$1")
base=$(basename "$1")

response1=$(curl -i "$1/post.php" \
-H 'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,/;q=0.8,application/signed-exchange;v=b3;q=0.7' \
-H 'Accept-Language: en-GB,en-US;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6' \
-H 'Cache-Control: no-cache' \
-H 'Connection: keep-alive' \
-H 'Content-Type: application/x-www-form-urlencoded' \
-H 'Cookie: _ga=GA1.2.491559635.1677012521; _gid=GA1.2.1184802545.1677012521; _gcl_au=1.1.1170839619.1677012521; CS458=k9fnkdji1oukchqnnvo939tmh5' \
-H 'Origin: $dir' \
-H 'Pragma: no-cache' \
-H "Referer: $1/login.php" \
-H 'Upgrade-Insecure-Requests: 1' \
-H 'User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36' \
--data-raw 'username=alice&password=Password123&form=login' \
--compressed \
--insecure)

response2=$(curl -i "$1/post.php" \
-H 'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,/;q=0.8,application/signed-exchange;v=b3;q=0.7' \
-H 'Accept-Language: en-GB,en-US;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6' \
-H 'Cache-Control: no-cache' \
-H 'Connection: keep-alive' \
-H 'Content-Type: application/x-www-form-urlencoded' \
-H 'Cookie: _ga=GA1.2.491559635.1677012521; _gid=GA1.2.1184802545.1677012521; _gcl_au=1.1.1170839619.1677012521; CS458=k9fnkdji1oukchqnnvo939tmh5' \
-H "Origin: $dir" \
-H 'Pragma: no-cache' \
-H "Referer: $1/content.php" \
-H 'Upgrade-Insecure-Requests: 1' \
-H 'User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36' \
--data-raw 'title=from+server&content=test&type=1&form=content&submit=' \
--compressed \
--insecure)

response3=$(curl -i "$1/post.php" \
-H 'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,/;q=0.8,application/signed-exchange;v=b3;q=0.7' \
-H 'Accept-Language: en-GB,en-US;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6' \
-H 'Cache-Control: no-cache' \
-H 'Connection: keep-alive' \
-H 'Content-Type: application/x-www-form-urlencoded' \
-H 'Cookie: _ga=GA1.2.491559635.1677012521; _gid=GA1.2.1184802545.1677012521; _gcl_au=1.1.1170839619.1677012521; CS458=k9fnkdji1oukchqnnvo939tmh5' \
-H "Origin: $dir" \
-H 'Pragma: no-cache' \
-H 'Referer: $1/view.php?id=15' \
-H 'Upgrade-Insecure-Requests: 1' \
-H 'User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36' \
--data-raw 'comment=test&form=comment&parent=15&submit=' \
--compressed \
--insecure)

response4=$(curl -i "$1/vote.php?id=15&vote=1" \
-H 'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,/;q=0.8,application/signed-exchange;v=b3;q=0.7' \
-H 'Accept-Language: en-GB,en-US;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6' \
-H 'Cache-Control: no-cache' \
-H 'Connection: keep-alive' \
-H 'Cookie: _ga=GA1.2.491559635.1677012521; _gid=GA1.2.1184802545.1677012521; _gcl_au=1.1.1170839619.1677012521; CS458=k9fnkdji1oukchqnnvo939tmh5' \
-H 'Pragma: no-cache' \
-H 'Referer: $1/index.php' \
-H 'Upgrade-Insecure-Requests: 1' \
-H 'User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36' \
--compressed \
--insecure)

echo "$response1"$'\n\n'"$response2"$'\n\n'"$response3"$'\n\n'"$response4" > response.txt
echo "$response1"$'\n\n'"$response2"$'\n\n'"$response3"$'\n\n'"$response4"
